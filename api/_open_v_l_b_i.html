<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Open source Very Long Baseline Interferometry: client using INDI libraries</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Open source Very Long Baseline Interferometry
   </div>
   <div id="projectbrief">OpenVLBI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">client using INDI libraries </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>OpenVLBI comes with an application which uses the core library and using an INDI server which contains a number of drivers with the necessary properties It needs an indi server on which to connect. Such server must connect to each node to be added to the vlbi client application. OpenVLBI nodes must contain informations about location, and should permit driving of the telescopes or antennas to the same celestial coordinates, tracking must be supported on the mountings and each node should capture and run at the same bit depth, frequency and possibly bandwidth and gain.</p>
<p>The needed INDI interfaces are so:</p><ul>
<li>INDI::BaseDevice::TELESCOPE_INTERFACE</li>
<li>INDI::BaseDevice::GPS_INTERFACE</li>
<li>INDI::BaseDevice::DETECTOR_INTERFACE</li>
</ul>
<p>and optionally, also for autoguiding:</p><ul>
<li>INDI::BaseDevice::CCD_INTERFACE</li>
<li>INDI::BaseDevice::GUIDER_INTERFACE</li>
</ul>
<p>The properties used by this client are:</p><ul>
<li>"EQUATORIAL_EOD_COORDS" RA and DEC from telescope for gotos and slews</li>
<li>"TELESCOPE_TRACK_STATE" from telescope for tracking</li>
<li>"GEOGRAPHIC_COORDS" LATITUDE, LONGITUDE and ELEVATION to fill the UV plane and plot the frequency response</li>
<li>"DETECTOR_CAPTURE" to start capture</li>
<li>"DETECTOR_SETTINGS" set up frequency, bandwidth, sampling rate and depth, and gain of the detectors</li>
</ul>
<p>The vlbi client application opens a command shell and reads from stdin. Format of commands is: cmd arg value:type where type can be string or numeric.</p>
<p>Here is the current command list:</p>
<div class="fragment"><div class="line">add context name:<span class="keywordtype">string</span> - add an OpenVLBI context to the <span class="keyword">internal</span> list</div><div class="line"><span class="keyword">set</span> model name:<span class="keywordtype">string</span> - <span class="keyword">new</span> comparison model</div><div class="line"><span class="keyword">set</span> context name:<span class="keywordtype">string</span> - <span class="keyword">set</span> current OpenVLBI context selecting it by name from the <span class="keyword">internal</span> list</div><div class="line"><span class="keyword">set</span> freq value:numeric - <span class="keyword">set</span> detectors frequency</div><div class="line"><span class="keyword">set</span> bitspersample value:numeric - <span class="keyword">set</span> detectors sample bit depth</div><div class="line"><span class="keyword">set</span> gain value:numeric - <span class="keyword">set</span> detectors gain</div><div class="line"><span class="keyword">set</span> bandwidth value:numeric - <span class="keyword">set</span> detectors bandwidth</div><div class="line"><span class="keyword">set</span> samplerate value:numeric - <span class="keyword">set</span> detectors sampling rate</div><div class="line"><span class="keyword">set</span> target ra,dec:numeric,numeric - <span class="keyword">set</span> telescopes celestial target</div><div class="line"><span class="keyword">set</span> parking state:<span class="keywordtype">string</span> - <span class="keyword">set</span> telescopes parking state (on, off)</div><div class="line"><span class="keyword">set</span> tracking state:<span class="keywordtype">string</span> - <span class="keyword">set</span> telescopes tracking state (on, off)</div><div class="line"><span class="keyword">set</span> connection state:<span class="keywordtype">string</span> - <span class="keyword">set</span> nodes connection state (on, off)</div><div class="line"><span class="keyword">get</span> observation type:<span class="keywordtype">string</span> - <span class="keyword">get</span> UV plot observation (raw, fft, mdl) <span class="keywordflow">for</span> raw observation, frequency transformed observation and FFT of the raw observation added with the comparison model</div></div><!-- fragment --><p>the VLBI client can be started in daemon mode using vlbi_server, which is a script that starts a local INDI server and creates two fifo files named /tmp/INDI.fifo and /tmp/OpenVLBI.fifo. once started, you can send the commands described above by writing those direcly on the corresponding fifo or by using the command scripts. an example:</p>
<div class="fragment"><div class="line">~# vlbi_server start</div><div class="line">~# vlbi_add_node 127.0.0.1 7626</div><div class="line">~# vlbi_add_node 127.0.0.1 7627</div><div class="line">...</div><div class="line">~# vlbi_server add context obs1</div><div class="line">~# vlbi_server <span class="keyword">set</span> context obs1</div><div class="line">~# vlbi_server <span class="keyword">set</span> connection on</div><div class="line">~# vlbi_server <span class="keyword">set</span> parking off</div><div class="line">~# vlbi_server <span class="keyword">set</span> tracking off</div><div class="line">~# vlbi_server <span class="keyword">set</span> target 5.75,25.44</div><div class="line">~# vlbi_server <span class="keyword">set</span> frequency 24000000</div><div class="line">~# vlbi_server <span class="keyword">set</span> samplerate 2000000</div><div class="line">~# vlbi_server <span class="keyword">set</span> bandwidth 10000</div><div class="line">~# vlbi_server <span class="keyword">set</span> bitspersample 16</div><div class="line">~# vlbi_server <span class="keyword">set</span> gain 10</div><div class="line">~# vlbi_server <span class="keyword">set</span> capture 10</div><div class="line">...</div><div class="line">~# vlbi_server <span class="keyword">get</span> observation raw</div><div class="line">~# vlbi_server <span class="keyword">set</span> connection off</div><div class="line">~# vlbi_server stop</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jun 10 2019 11:14:14 for Open source Very Long Baseline Interferometry by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
