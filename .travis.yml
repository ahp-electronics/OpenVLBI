compiler:
 - gcc

git:
 submodules: false

language: cpp
sudo: required
dist: xenial

os: 
 - linux

matrix:
  include:
    - os: linux
      addons:
        apt:
          packages:
            - g++-5
          sources: &sources
            - ubuntu-toolchain-r-test
      env:
        - MATRIX_EVAL="CC=gcc-5 && CXX=g++-5"

branches:
  only:
    - master
    - unstable

before_install:
    - eval "${MATRIX_EVAL}"
install:
    - echo Building everything
    - bash scripts/build.sh 

script:
    - scripts/test_client.sh 5 720 366000000 1024 2.46,38.16 | vlbi_client_dummy | base64 -d -i | convert -size 128x128 -depth 8 -colorspace GRAY gray:- png:- | file
