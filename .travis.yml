compiler:
 - gcc

git:
 submodules: false

language: cpp
sudo: required
dist: xenial

os: 
 - linux

matrix:
  include:
    - os: linux
      addons:
        apt:
          packages:
            - g++-5
          sources: &sources
            - ubuntu-toolchain-r-test
      env:
        - MATRIX_EVAL="CC=gcc-5 && CXX=g++-5"

branches:
  only:
    - master
    - unstable

before_install:
    - eval "${MATRIX_EVAL}"
install:
    - echo Building everything
    - bash scripts/build.sh 

script:
    - bash scripts/test_client.sh 128x128 5 30 366000000 10000 1024 18.46,38.16 $(date +%Y/%m/%d-%H:%M:%S ).$RANDOM$RANDOM | vlbi_client_dummy 
